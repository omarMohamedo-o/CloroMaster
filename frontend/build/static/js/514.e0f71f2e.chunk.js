"use strict";(self.webpackChunkchloromaster=self.webpackChunkchloromaster||[]).push([[514],{2514(e,t,s){s.r(t),s.d(t,{default:()=>m});var a=s(5043),r=s(5685),n=s(1529),i=s(9347),c=s(5581),l=s(9262),o=s(4428),d=s(579);const m=()=>{const{t:e}=(0,i.o)(),t=(0,r.Zp)(),[s,m]=(0,a.useState)(null),[x,u]=(0,a.useState)(!0),[g,h]=(0,a.useState)("");(0,a.useEffect)(()=>{localStorage.getItem("adminToken")?p():t(n.R7.ADMIN_LOGIN)},[t]);const p=async()=>{try{const e=localStorage.getItem("adminToken"),t=await fetch("".concat(c.A.api.baseURL,"/admin/dashboard/stats"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("Failed to fetch dashboard stats");const s=await t.json();m(s)}catch(e){h(e.message)}finally{u(!1)}};if(x)return(0,d.jsx)(o.A,{loading:!0,loadingMessage:e("admin.loading")});if(g)return(0,d.jsx)(o.A,{error:!0,title:e("admin.error"),message:g,children:(0,d.jsx)("button",{onClick:p,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:e("admin.retry")})});const b=e=>{let{title:t,value:s,subtitle:a,icon:r,color:n}=e;return(0,d.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 border-l-4 ".concat(n),children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-gray-500 text-sm mb-1",children:t}),(0,d.jsx)("p",{className:"text-3xl font-bold text-gray-800",children:s}),a&&(0,d.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:a})]}),(0,d.jsx)("div",{className:"text-4xl opacity-20",children:r})]})})};return(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,d.jsx)(l.A,{title:e("admin.dashboard"),subtitle:"ChloroMaster Analytics",actions:[{label:e("admin.submissions"),onClick:()=>t(n.R7.ADMIN_SUBMISSIONS),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"},{label:e("admin.logout"),onClick:()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),t(n.R7.ADMIN_LOGIN)}}]}),(0,d.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,d.jsx)(b,{title:e("admin.totalVisitors"),value:s.totalVisitors.toLocaleString(),subtitle:"".concat(e("admin.today"),": ").concat(s.todayVisitors),icon:"\ud83d\udc65",color:"border-blue-500"}),(0,d.jsx)(b,{title:e("admin.totalSubmissions"),value:s.totalSubmissions.toLocaleString(),subtitle:"".concat(e("admin.today"),": ").concat(s.todaySubmissions),icon:"\ud83d\udce7",color:"border-green-500"}),(0,d.jsx)(b,{title:e("admin.unreadMessages"),value:s.unreadSubmissions,icon:"\ud83d\udcec",color:"border-yellow-500"}),(0,d.jsx)(b,{title:e("admin.conversionRate"),value:"".concat(s.conversionRate,"%"),icon:"\ud83d\udcca",color:"border-purple-500"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:e("admin.topTrafficSources")}),s.topTrafficSources&&s.topTrafficSources.length>0?(0,d.jsx)("div",{className:"space-y-3",children:s.topTrafficSources.map((e,t)=>(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-700 truncate",children:e.source}),(0,d.jsx)("div",{className:"mt-1 w-full bg-gray-200 rounded-full h-2",children:(0,d.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(e.percentage,"%")}})})]}),(0,d.jsx)("span",{className:"ml-4 text-sm font-semibold text-gray-600",children:e.count})]},t))}):(0,d.jsx)("p",{className:"text-gray-500 text-center py-8",children:e("admin.noData")})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:e("admin.topPages")}),s.topPages&&s.topPages.length>0?(0,d.jsx)("div",{className:"space-y-2",children:s.topPages.map((e,t)=>(0,d.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[(0,d.jsx)("span",{className:"text-sm text-gray-700 truncate flex-1",children:e.page}),(0,d.jsx)("span",{className:"ml-4 px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-semibold",children:e.views})]},t))}):(0,d.jsx)("p",{className:"text-gray-500 text-center py-8",children:e("admin.noData")})]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:e("admin.quickActions")}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("button",{onClick:()=>t("".concat(n.R7.ADMIN_SUBMISSIONS,"?filter=unread")),className:"p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all text-left",children:[(0,d.jsx)("div",{className:"text-2xl mb-2",children:"\ud83d\udcec"}),(0,d.jsx)("h3",{className:"font-semibold text-gray-800",children:e("admin.viewUnreadMessages")}),(0,d.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[s.unreadSubmissions," ",e("admin.messages")]})]}),(0,d.jsxs)("button",{onClick:()=>t(n.R7.ADMIN_SUBMISSIONS),className:"p-4 border-2 border-gray-200 rounded-lg hover:border-green-500 hover:bg-green-50 transition-all text-left",children:[(0,d.jsx)("div",{className:"text-2xl mb-2",children:"\ud83d\udccb"}),(0,d.jsx)("h3",{className:"font-semibold text-gray-800",children:e("admin.allSubmissions")}),(0,d.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[s.totalSubmissions," ",e("admin.total")]})]}),(0,d.jsxs)("button",{onClick:p,className:"p-4 border-2 border-gray-200 rounded-lg hover:border-purple-500 hover:bg-purple-50 transition-all text-left",children:[(0,d.jsx)("div",{className:"text-2xl mb-2",children:"\ud83d\udd04"}),(0,d.jsx)("h3",{className:"font-semibold text-gray-800",children:e("admin.refreshData")}),(0,d.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e("admin.updateStatistics")})]})]})]})]})]})}},4428(e,t,s){s.d(t,{A:()=>r});s(5043);var a=s(579);function r(e){let{loading:t,error:s,title:r,message:n,loadingMessage:i,children:c}=e;return t?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("img",{src:"/images/chloromaster-logo.png",alt:"ChloroMaster",className:"w-32 md:w-40 h-auto mx-auto mb-4 object-contain float-slow"}),(0,a.jsx)("span",{className:"sr-only","aria-live":"polite",children:i||"Loading..."})]})}):s?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"max-w-md w-full bg-red-50 border border-red-200 text-red-700 p-6 rounded-lg",children:[r&&(0,a.jsx)("h3",{className:"font-semibold mb-2",children:r}),(0,a.jsx)("p",{children:n||s}),(0,a.jsx)("div",{className:"mt-4",children:c})]})}):null}},5581(e,t,s){s.d(t,{A:()=>a});const a={api:{baseURL:"https://localhost:5001/api",timeout:3e4},app:{name:"ChloroMaster",description:"Engineering, Contracting & Supplies - Water Treatment & Chlorination Systems",version:"1.0.0"},contact:{email:"info@chloromaster.com",phone:"+20 12 22155310",phone2:"+20 12 78253701",whatsapp:"+201278253701",address:"58 Mahaliya 1 - Second District, Obour - Qalyubia",addressLink:"https://maps.google.com/?q=58+Mahaliya+1+Second+District+Obour+Qalyubia+Egypt",workingHours:{weekdays:"Sunday - Wednesday: 9:00 AM - 6:00 PM",saturday:"Saturday: 9:00 AM - 2:00 PM"}},features:{darkMode:!0,animations:!0,contactForm:!0,services:!0}}},5748(e,t,s){s.d(t,{A:()=>u});s(5043);var a=s(5685),r=s(2774),n=s(9347),i=s(4606),c=s(1529);const l=function(){let{pathname:e="",params:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const a=String(e||"").trim();let r=a;const n=(e=>{try{const t=String(e||"").match(/^\/(en|ar)(?=\/|$)/i);return t?"/".concat(t[1].toLowerCase()):""}catch(t){return""}})(a),l=e=>String(e||"").split(/[?#]/)[0].replace(/\/$/,"");r=String(r||"").replace(new RegExp("^".concat(n)),"");const o=t&&(t.slug||t.id||t.serviceId)||null;if(r.startsWith("/equipment/")||o&&"string"===typeof o){const e=l(o&&"string"===typeof o?o:r.split("/equipment/")[1]||"").split("/")[0];if(e){const t=String(e||"").toLowerCase();for(const e of i.A)if(e.products&&Array.isArray(e.products))for(const a of e.products){const r=String(a.slug||"").toLowerCase();if(r===t)return"".concat(n).concat(c.R7.SERVICE(e.slug));const i=e=>String(e||"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");if(i(r)===i(t))return"".concat(n).concat(c.R7.SERVICE(e.slug));const l=a.title&&a.title.en?String(a.title.en).toLowerCase():"",o=a.title&&a.title.ar?String(a.title.ar).toLowerCase():"";if(l&&i(l)===i(t))return"".concat(n).concat(c.R7.SERVICE(e.slug));if(o&&i(o)===i(t))return"".concat(n).concat(c.R7.SERVICE(e.slug));try{const s=i(r),a=i(t);if(s&&a&&(s.includes(a)||a.includes(s)))return"".concat(n).concat(c.R7.SERVICE(e.slug))}catch(s){}}}return"".concat(n).concat(c.R7.HOME)}return r.startsWith("/admin/submissions/")?"".concat(n).concat(c.R7.ADMIN_SUBMISSIONS):(r.startsWith("/service/")||r===c.R7.VIDEOS||r.startsWith("/videos"),"".concat(n).concat(c.R7.HOME))}catch(s){return c.R7.HOME}},o=260;function d(){if(document.getElementById("cm-back-exit-style"))return o;const e=document.createElement("style");return e.id="cm-back-exit-style",e.innerHTML="#cm-page-wrapper{transition:transform ".concat(o,"ms cubic-bezier(.2,.9,.3,1),opacity ").concat(o,"ms cubic-bezier(.2,.9,.3,1);} #cm-page-wrapper.cm-exit{transform:translateY(-18px);opacity:0;}"),document.head.appendChild(e),o}function m(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;try{const e=document.getElementById("cm-page-wrapper")||document.querySelector("main")||document.body;e&&e.classList&&e.classList.add("cm-exit")}catch(a){}setTimeout(()=>{e(t)},s)}var x=s(579);function u(e){let{className:t="mb-8"}=e;const s=(0,a.Zp)(),i=(0,a.zy)(),o=(0,a.g)(),{t:u,language:g}=(0,n.o)(),h="string"===typeof g&&g.toLowerCase().startsWith("ar");return(0,x.jsx)("div",{className:"py-4 ".concat(t),children:(0,x.jsxs)("div",{className:"relative inline-block group",children:[(0,x.jsx)("span",{className:"absolute -inset-1 rounded-full bg-brand/10 backdrop-blur-sm opacity-0 transform scale-95 transition-all duration-200 group-hover:opacity-100 group-hover:scale-100 pointer-events-none shadow-lg","aria-hidden":"true"}),(0,x.jsx)("button",{"data-back-button":"true",onClick:e=>{e&&e.preventDefault&&e.preventDefault();const t=l({pathname:i.pathname,params:o})||c.R7.HOME;d(),m(s,t)},className:"relative z-10 inline-flex items-center gap-3 text-brand hover:text-brand-secondary bg-transparent border-0 px-3 py-2 rounded-lg transition-all duration-200 hover:shadow-md",children:h?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{className:"text-sm font-medium text-brand",children:u("common_ui.back")||"Back"}),(0,x.jsx)(r.Z0P,{className:"text-brand text-base"})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(r.QVr,{className:"text-brand text-base"}),(0,x.jsx)("span",{className:"text-sm font-medium text-brand",children:u("common_ui.back")||"Back"})]})})]})})}},9262(e,t,s){s.d(t,{A:()=>c});var a=s(2555),r=(s(5043),s(5748)),n=s(579);function i(e){let{title:t,subtitle:s,actions:a=[],showBack:i=!1,backClassName:c=""}=e;return(0,n.jsx)("header",{className:"bg-white shadow-sm",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[i&&(0,n.jsx)(r.A,{className:c}),(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:t}),s&&(0,n.jsx)("p",{className:"text-sm text-gray-600",children:s})]}),(0,n.jsx)("div",{className:"flex items-center gap-4",children:a.map((e,t)=>(0,n.jsx)("button",{onClick:e.onClick,className:e.className||"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:e.label},t))})]})})})}function c(e){return(0,n.jsx)(i,(0,a.A)({},e))}}}]);
//# sourceMappingURL=514.e0f71f2e.chunk.js.map