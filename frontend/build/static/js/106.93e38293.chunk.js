"use strict";(self.webpackChunkchloromaster=self.webpackChunkchloromaster||[]).push([[106],{5106(e,a,t){t.r(a),t.d(a,{default:()=>c});var s=t(2555),r=t(5043),l=t(5685),i=t(4039),d=t(5581),o=t(579);const c=()=>{const{language:e}=(0,i.o)(),a=(0,l.Zp)(),[t,c]=(0,l.ok)(),[n,x]=(0,r.useState)([]),[m,p]=(0,r.useState)(!0),[g,h]=(0,r.useState)(""),[u,y]=(0,r.useState)({page:1,pageSize:10,total:0,totalPages:0}),[b,j]=(0,r.useState)({search:t.get("search")||"",isRead:"unread"===t.get("filter")?"false":""});(0,r.useEffect)(()=>{localStorage.getItem("adminToken")?f():a("/admin/login")},[u.page,b]);const f=async()=>{p(!0);try{const e=new URLSearchParams((0,s.A)((0,s.A)({page:u.page,pageSize:u.pageSize},b.search&&{search:b.search}),b.isRead&&{isRead:b.isRead})),a=await fetch("".concat(d.A.api.baseURL,"/admin/submissions?").concat(e));if(!a.ok)throw new Error("Failed to fetch submissions");const t=await a.json();x(t.data),y((0,s.A)((0,s.A)({},u),{},{total:t.total,totalPages:t.totalPages}))}catch(e){h(e.message)}finally{p(!1)}},N=e=>{j((0,s.A)((0,s.A)({},b),{},{isRead:e})),y((0,s.A)((0,s.A)({},u),{},{page:1}))};return(0,o.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,o.jsx)("header",{className:"bg-white shadow-sm",children:(0,o.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"ar"===e?"\u0627\u0644\u0631\u0633\u0627\u0626\u0644":"Submissions"}),(0,o.jsxs)("p",{className:"text-sm text-gray-600",children:[u.total," ","ar"===e?"\u0631\u0633\u0627\u0644\u0629":"total"]})]}),(0,o.jsxs)("div",{className:"flex gap-4",children:[(0,o.jsx)("button",{onClick:()=>a("/admin/dashboard"),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"ar"===e?"\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645":"Dashboard"}),(0,o.jsx)("button",{onClick:()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),a("/admin/login")},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"ar"===e?"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c":"Logout"})]})]})})}),(0,o.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,o.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:(0,o.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,o.jsx)("form",{onSubmit:e=>{e.preventDefault(),y((0,s.A)((0,s.A)({},u),{},{page:1}))},className:"flex-1",children:(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("input",{type:"text",value:b.search,onChange:e=>j((0,s.A)((0,s.A)({},b),{},{search:e.target.value})),placeholder:"ar"===e?"\u0628\u062d\u062b...":"Search...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,o.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"ar"===e?"\u0628\u062d\u062b":"Search"})]})}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("button",{onClick:()=>N(""),className:"px-4 py-2 rounded-lg ".concat(""===b.isRead?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"ar"===e?"\u0627\u0644\u0643\u0644":"All"}),(0,o.jsx)("button",{onClick:()=>N("false"),className:"px-4 py-2 rounded-lg ".concat("false"===b.isRead?"bg-yellow-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"ar"===e?"\u063a\u064a\u0631 \u0645\u0642\u0631\u0648\u0621\u0629":"Unread"}),(0,o.jsx)("button",{onClick:()=>N("true"),className:"px-4 py-2 rounded-lg ".concat("true"===b.isRead?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"ar"===e?"\u0645\u0642\u0631\u0648\u0621\u0629":"Read"})]})]})}),(0,o.jsx)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:m?(0,o.jsx)("div",{className:"text-center py-12",children:(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"})}):g?(0,o.jsx)("div",{className:"p-6 text-center text-red-600",children:g}):0===n.length?(0,o.jsx)("div",{className:"p-12 text-center text-gray-500",children:"ar"===e?"\u0644\u0627 \u062a\u0648\u062c\u062f \u0631\u0633\u0627\u0626\u0644":"No submissions found"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"w-full",children:[(0,o.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ar"===e?"\u0627\u0644\u0627\u0633\u0645":"Name"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ar"===e?"\u0627\u0644\u0628\u0631\u064a\u062f":"Email"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ar"===e?"\u0627\u0644\u0634\u0631\u0643\u0629":"Company"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ar"===e?"\u0627\u0644\u062a\u0627\u0631\u064a\u062e":"Date"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ar"===e?"\u0627\u0644\u062d\u0627\u0644\u0629":"Status"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ar"===e?"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a":"Actions"})]})}),(0,o.jsx)("tbody",{className:"divide-y divide-gray-200",children:n.map(t=>(0,o.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"font-medium text-gray-900",children:t.fullName})}),(0,o.jsx)("td",{className:"px-6 py-4",children:(0,o.jsx)("div",{className:"text-sm text-gray-600",children:t.email})}),(0,o.jsx)("td",{className:"px-6 py-4",children:(0,o.jsx)("div",{className:"text-sm text-gray-600",children:t.company||"-"})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("div",{className:"text-sm text-gray-600",children:new Date(t.submittedAt).toLocaleDateString()})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:t.isRead?(0,o.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:"ar"===e?"\u0645\u0642\u0631\u0648\u0621\u0629":"Read"}):(0,o.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"ar"===e?"\u062c\u062f\u064a\u062f\u0629":"New"})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("button",{onClick:()=>a("/admin/submissions/".concat(t.id)),className:"text-blue-600 hover:text-blue-800",children:"ar"===e?"\u0639\u0631\u0636":"View"}),(0,o.jsx)("button",{onClick:()=>(async(e,a)=>{try{if(!(await fetch("".concat(d.A.api.baseURL,"/admin/submissions/").concat(e,"/read"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw new Error("Failed to update status");f()}catch(t){alert(t.message)}})(t.id,!t.isRead),className:"text-green-600 hover:text-green-800",children:t.isRead?"ar"===e?"\u063a\u064a\u0631 \u0645\u0642\u0631\u0648\u0621\u0629":"Unread":"ar"===e?"\u0645\u0642\u0631\u0648\u0621\u0629":"Read"}),(0,o.jsx)("button",{onClick:()=>(async a=>{if(window.confirm("ar"===e?"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0627\u0644\u062d\u0630\u0641\u061f":"Are you sure you want to delete?"))try{if(!(await fetch("".concat(d.A.api.baseURL,"/admin/submissions/").concat(a),{method:"DELETE"})).ok)throw new Error("Failed to delete");f()}catch(t){alert(t.message)}})(t.id),className:"text-red-600 hover:text-red-800",children:"ar"===e?"\u062d\u0630\u0641":"Delete"})]})})]},t.id))})]})}),(0,o.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[(0,o.jsx)("div",{className:"text-sm text-gray-700",children:"ar"===e?"\u0639\u0631\u0636 ".concat((u.page-1)*u.pageSize+1," - ").concat(Math.min(u.page*u.pageSize,u.total)," \u0645\u0646 ").concat(u.total):"Showing ".concat((u.page-1)*u.pageSize+1," - ").concat(Math.min(u.page*u.pageSize,u.total)," of ").concat(u.total)}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("button",{onClick:()=>y((0,s.A)((0,s.A)({},u),{},{page:u.page-1})),disabled:1===u.page,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"ar"===e?"\u0627\u0644\u0633\u0627\u0628\u0642":"Previous"}),(0,o.jsxs)("span",{className:"px-4 py-2 text-gray-700",children:[u.page," / ",u.totalPages]}),(0,o.jsx)("button",{onClick:()=>y((0,s.A)((0,s.A)({},u),{},{page:u.page+1})),disabled:u.page>=u.totalPages,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"ar"===e?"\u0627\u0644\u062a\u0627\u0644\u064a":"Next"})]})]})]})})]})]})}},5581(e,a,t){t.d(a,{A:()=>s});const s={api:{baseURL:"https://localhost:5001/api",timeout:3e4},app:{name:"ChloroMaster",description:"Engineering, Contracting & Supplies - Water Treatment & Chlorination Systems",version:"1.0.0"},contact:{email:"ChloroMaster@outlook.sa",phone:"+20 12 22155310",address:"58 Mahaliya 1 - Second District, Obour - Qalyubia",addressLink:"https://maps.google.com/?q=58+Mahaliya+1+Second+District+Obour+Qalyubia+Egypt",workingHours:{weekdays:"Sunday - Wednesday: 9:00 AM - 6:00 PM",saturday:"Saturday: 9:00 AM - 2:00 PM"}},features:{darkMode:!0,animations:!0,contactForm:!0,services:!0}}}}]);
//# sourceMappingURL=106.93e38293.chunk.js.map