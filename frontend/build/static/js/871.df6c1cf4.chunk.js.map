{"version":3,"file":"static/js/871.df6c1cf4.chunk.js","mappings":"qLAIe,SAASA,EAAaC,GAAiE,IAAhE,MAAEC,EAAK,eAAEC,EAAc,SAAEC,EAAQ,SAAEC,EAAQ,eAAEC,GAAgBL,GAC/FM,EAAAA,EAAAA,MAIAC,EAAAA,EAAAA,WAAU,KACN,MAAMC,EAAQC,MAAMC,KAAKC,SAASC,iBAAiB,uBAKnD,OAHAJ,EAAMK,QAAQ,CAACC,EAAIC,KACXA,EAAM,IAAGD,EAAGE,MAAMC,QAAU,UAE7B,KACHT,EAAMK,QAASC,IACPA,GAAMA,EAAGE,QAAOF,EAAGE,MAAMC,QAAU,QAGhD,KAKHV,EAAAA,EAAAA,WAAU,KACN,IAAMI,SAASO,KAAKC,QAAQC,WAAa,GAAK,CAAE,MAAOC,GAAiB,CACxE,MAAO,KAAQ,WAAaV,SAASO,KAAKC,QAAQC,UAAY,CAAE,MAAOC,GAAiB,IACzF,IAGH,MAAMC,EAAiB,MACnB,IAAKpB,EAAgB,OAAOD,GAAS,GAErC,GAAqB,kBAAVA,GAAsBA,EAAMsB,SAASrB,GAAiB,OAAOD,EAExE,MAAMuB,EAAMvB,GAA0B,kBAAVA,GAAsBA,EAAMwB,SAAS,KAAO,GAAK,IAC7E,MAAO,GAAAC,OAAGzB,GAAS,IAAEyB,OAAGF,GAAGE,OAAGxB,GAAiByB,MAClD,EAPsB,GASvB,OACIC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,2DAA0DzB,UACrE0B,EAAAA,EAAAA,MAAA,OAAKD,UAAU,yBAAwBzB,SAAA,EACnCwB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWzB,UACtBwB,EAAAA,EAAAA,KAACG,EAAAA,EAAU,CAACF,UAAU,YAG1BD,EAAAA,EAAAA,KAAA,OAAKI,GAAG,kBAAkBH,UAAU,wGAAuGzB,UACvI0B,EAAAA,EAAAA,MAAA,OAAKD,UAAU,4BAA2BzB,SAAA,EACtC0B,EAAAA,EAAAA,MAAA,OAAKD,UAAU,SAAQzB,SAAA,CAClBF,GACG0B,EAAAA,EAAAA,KAAA,MAAIC,UAAU,iCAAgCzB,SACzCkB,EAAeW,MAAM/B,GAAgBgC,IAAI,CAACC,EAAMC,EAAGC,KAChDP,EAAAA,EAAAA,MAACQ,EAAAA,SAAc,CAAAlC,SAAA,CACV+B,EACAC,EAAIC,EAAIE,OAAS,IACdX,EAAAA,EAAAA,KAAA,QAAMC,UAAU,+EAA8EzB,SACzFF,MAJQkC,OAW7BR,EAAAA,EAAAA,KAAA,MAAIC,UAAU,iCAAgCzB,SAAEkB,GAAkBrB,IAErEE,GACGyB,EAAAA,EAAAA,KAAA,KAAGC,UAAU,6EAA4EzB,SACpFD,IAEL,QAEPE,GACGuB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,OAAMzB,SAChBC,IAEL,WAIZuB,EAAAA,EAAAA,KAAA,OAAAxB,SACKA,QAMrB,C,6FCkBA,QA1FO,WAAiE,IAAtC,SAAEoC,EAAW,GAAE,OAAEC,EAAS,CAAC,GAAGC,UAAAH,OAAA,QAAAI,IAAAD,UAAA,GAAAA,UAAA,GAAG,CAAC,EAChE,IAEI,MAAME,EAAeC,OAAOL,GAAY,IAAIb,OAC5C,IAAImB,EAAOF,EAKX,MAQMG,EARoBC,KACtB,IACI,MAAMC,EAAIJ,OAAOG,GAAK,IAAIE,MAAM,uBAChC,OAAOD,EAAC,IAAAvB,OAAOuB,EAAE,GAAGE,eAAkB,EAC1C,CAAE,MAAO9B,GACL,MAAO,EACX,GAEe+B,CAAiBR,GAG9BS,EAASC,GAAMT,OAAOS,GAAK,IAAIrB,MAAM,QAAQ,GAAGsB,QAAQ,MAAO,IAGrET,EAAOD,OAAOC,GAAQ,IAAIS,QAAQ,IAAIC,OAAO,IAAD9B,OAAKqB,IAAe,IAGhE,MAAMU,EAAYhB,IAAWA,EAAOiB,MAAQjB,EAAOT,IAAMS,EAAOkB,YAAc,KAG9E,GAAIb,EAAKc,WAAW,gBAAmBH,GAAkC,kBAAdA,EAAyB,CAChF,MACMI,EAAcR,EADRI,GAAkC,kBAAdA,EAAyBA,EAAaX,EAAKb,MAAM,eAAe,IAAM,IACvEA,MAAM,KAAK,GAE1C,GAAI4B,EAAa,CAEb,MAAMC,EAAYjB,OAAOgB,GAAe,IAAIV,cAE5C,IAAK,MAAMY,KAAWC,EAAAA,EAClB,GAAID,EAAQE,UAAYxD,MAAMyD,QAAQH,EAAQE,UAC1C,IAAK,MAAMjB,KAAKe,EAAQE,SAAU,CAC9B,MAAME,EAAgBtB,OAAOG,EAAEU,MAAQ,IAAIP,cAC3C,GAAIgB,IAAkBL,EAAW,MAAM,GAANpC,OAAUqB,GAAUrB,OAAG0C,EAAAA,GAAMC,QAAQN,EAAQL,OAG9E,MAAMY,EAAYhB,GAAKT,OAAOS,GAAK,IAAIH,cAAcI,QAAQ,cAAe,KAAKA,QAAQ,WAAY,IACrG,GAAIe,EAAUH,KAAmBG,EAAUR,GAAY,MAAM,GAANpC,OAAUqB,GAAUrB,OAAG0C,EAAAA,GAAMC,QAAQN,EAAQL,OAGpG,MAAMa,EAAWvB,EAAE/C,OAAS+C,EAAE/C,MAAMuE,GAAM3B,OAAOG,EAAE/C,MAAMuE,IAAIrB,cAAgB,GACvEsB,EAAWzB,EAAE/C,OAAS+C,EAAE/C,MAAMyE,GAAM7B,OAAOG,EAAE/C,MAAMyE,IAAIvB,cAAgB,GAC7E,GAAIoB,GAAWD,EAAUC,KAAaD,EAAUR,GAAY,MAAM,GAANpC,OAAUqB,GAAUrB,OAAG0C,EAAAA,GAAMC,QAAQN,EAAQL,OACzG,GAAIe,GAAWH,EAAUG,KAAaH,EAAUR,GAAY,MAAM,GAANpC,OAAUqB,GAAUrB,OAAG0C,EAAAA,GAAMC,QAAQN,EAAQL,OAIzG,IACI,MAAMiB,EAAQL,EAAUH,GAClBS,EAAMN,EAAUR,GACtB,GAAIa,GAASC,IAAQD,EAAMpD,SAASqD,IAAQA,EAAIrD,SAASoD,IAAS,MAAM,GAANjD,OAAUqB,GAAUrB,OAAG0C,EAAAA,GAAMC,QAAQN,EAAQL,MACnH,CAAE,MAAOrC,GACL,CAER,CAIZ,CAEA,MAAM,GAANK,OAAUqB,GAAUrB,OAAG0C,EAAAA,GAAMS,KACjC,CAGA,OAAI/B,EAAKc,WAAW,uBAA8B,GAANlC,OAAUqB,GAAUrB,OAAG0C,EAAAA,GAAMU,oBAGrEhC,EAAKc,WAAW,cAMhBd,IAASsB,EAAAA,GAAMW,QAAUjC,EAAKc,WAAW,WAJnC,GAANlC,OAAUqB,GAAUrB,OAAG0C,EAAAA,GAAMS,MAQrC,CAAE,MAAOxD,GACL,OAAO+C,EAAAA,GAAMS,IACjB,CACJ,ECvGMG,EAAU,IAET,SAASC,IACZ,GAAItE,SAASuE,eAAe,sBAAuB,OAAOF,EAC1D,MAAMhE,EAAQL,SAASwE,cAAc,SAIrC,OAHAnE,EAAMgB,GAAK,qBACXhB,EAAMoE,UAAS,yCAAA1D,OAA4CsD,EAAO,wCAAAtD,OAAuCsD,EAAO,kGAChHrE,SAAS0E,KAAKC,YAAYtE,GACnBgE,CACX,CAEO,SAASO,EAAuBC,EAAUC,GAAwB,IAApBC,EAAOhD,UAAAH,OAAA,QAAAI,IAAAD,UAAA,GAAAA,UAAA,GAAGsC,EAC3D,IACI,MAAMW,EAAUhF,SAASuE,eAAe,oBAAsBvE,SAASiF,cAAc,SAAWjF,SAASO,KACzGyE,GAAWA,EAAQE,WAAaF,EAAQE,UAAUC,IAAI,UAC1D,CAAE,MAAOC,GAET,CAEAC,WAAW,KACPR,EAASC,IACVC,EACP,C,aCde,SAAS3D,EAAU/B,GAA0B,IAAzB,UAAE6B,EAAY,QAAQ7B,EACrD,MAAMwF,GAAWS,EAAAA,EAAAA,MACXC,GAAWC,EAAAA,EAAAA,MACX1D,GAAS2D,EAAAA,EAAAA,MACT,EAAEC,EAAC,SAAEC,IAAahG,EAAAA,EAAAA,KAClBiG,EAA4B,kBAAbD,GAAyBA,EAASnD,cAAcS,WAAW,MAYhF,OACIhC,EAAAA,EAAAA,KAAA,OAAKC,UAAS,QAAAH,OAAUG,GAAYzB,UAChC0B,EAAAA,EAAAA,MAAA,OAAKD,UAAU,8BAA6BzB,SAAA,EACxCwB,EAAAA,EAAAA,KAAA,QAAMC,UAAU,mMAAmM,cAAY,UAC/ND,EAAAA,EAAAA,KAAA,UACI,mBAAiB,OACjB4E,QAhBKnF,IACjBA,GAAKA,EAAEoF,gBAAkBpF,EAAEoF,iBAG3B,MAAMC,EAASC,EAAkB,CAAEnE,SAAU0D,EAAS1D,SAAUC,YAAa2B,EAAAA,GAAMS,KAEnFI,IACAM,EAAuBC,EAAUkB,IAUrB7E,UAAU,8KAA6KzB,SAEtLmG,GACGzE,EAAAA,EAAAA,MAAA8E,EAAAA,SAAA,CAAAxG,SAAA,EACIwB,EAAAA,EAAAA,KAAA,QAAMC,UAAU,iCAAgCzB,SAAEiG,EAAE,mBAAqB,UACzEzE,EAAAA,EAAAA,KAACiF,EAAAA,IAAY,CAAChF,UAAU,6BAG5BC,EAAAA,EAAAA,MAAA8E,EAAAA,SAAA,CAAAxG,SAAA,EACIwB,EAAAA,EAAAA,KAACkF,EAAAA,IAAW,CAACjF,UAAU,0BACvBD,EAAAA,EAAAA,KAAA,QAAMC,UAAU,iCAAgCzB,SAAEiG,EAAE,mBAAqB,kBAOrG,C","sources":["components/layout/SubpageLayout.jsx","lib/backNavigation.js","lib/exitAnimation.js","components/common/BackButton.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { useLanguage } from '../../context/LanguageContext';\nimport BackButton from '../common/BackButton';\n\nexport default function SubpageLayout({ title, titleHighlight, subtitle, children, headerChildren }) {\n    useLanguage();\n\n    // Hide any duplicate back buttons that might be injected by pages\n    // so the single shared `BackButton` is always the authoritative control.\n    useEffect(() => {\n        const backs = Array.from(document.querySelectorAll('[data-back-button]'));\n        // keep the first, hide the rest\n        backs.forEach((el, idx) => {\n            if (idx > 0) el.style.display = 'none';\n        });\n        return () => {\n            backs.forEach((el) => {\n                if (el && el.style) el.style.display = '';\n            });\n        };\n    }, []);\n\n    // Inform global UI that we're rendering a subpage so global footer\n    // floating controls (like the footer scroll-top) can avoid rendering\n    // duplicate controls.\n    useEffect(() => {\n        try { document.body.dataset.hasSubpage = '1'; } catch (e) { /* ignore */ }\n        return () => { try { delete document.body.dataset.hasSubpage; } catch (e) { /* ignore */ } };\n    }, []);\n\n    // Ensure titleHighlight works even when translations provide title and highlight separately\n    const effectiveTitle = (() => {\n        if (!titleHighlight) return title || '';\n        // If the title already contains the highlight, use it as-is\n        if (typeof title === 'string' && title.includes(titleHighlight)) return title;\n        // Otherwise combine them with a space if needed\n        const sep = title && typeof title === 'string' && title.endsWith(' ') ? '' : ' ';\n        return `${title || ''}${sep}${titleHighlight}`.trim();\n    })();\n\n    return (\n        <div className=\"bg-gray-50 dark:bg-gray-900 min-h-screen py-6 cm-subpage\">\n            <div className=\"container mx-auto px-6\">\n                <div className=\"mb-0 py-4\">\n                    <BackButton className=\"mb-0\" />\n                </div>\n\n                <div id=\"cm-page-wrapper\" className=\"rounded-2xl overflow-hidden mb-8 shadow-xl bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-white\">\n                    <div className=\"px-6 py-6 md:px-8 md:py-8\">\n                        <div className=\"flex-1\">\n                            {titleHighlight ? (\n                                <h1 className=\"text-3xl md:text-4xl font-bold\">\n                                    {effectiveTitle.split(titleHighlight).map((part, i, arr) => (\n                                        <React.Fragment key={i}>\n                                            {part}\n                                            {i < arr.length - 1 && (\n                                                <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-brand to-brand-secondary\">\n                                                    {titleHighlight}\n                                                </span>\n                                            )}\n                                        </React.Fragment>\n                                    ))}\n                                </h1>\n                            ) : (\n                                <h1 className=\"text-3xl md:text-4xl font-bold\">{effectiveTitle || title}</h1>\n                            )}\n                            {subtitle ? (\n                                <p className=\"mt-4 text-sm md:text-base text-gray-600 dark:text-gray-300 leading-relaxed\">\n                                    {subtitle}\n                                </p>\n                            ) : null}\n                        </div>\n                        {headerChildren ? (\n                            <div className=\"mt-6\">\n                                {headerChildren}\n                            </div>\n                        ) : null}\n                    </div>\n                </div>\n\n                <div>\n                    {children}\n                </div>\n                {/* Up arrow handled globally in the Footer to provide a single consistent control */}\n            </div>\n        </div>\n    );\n}\n","import servicesMaster from '../i18n/services.master';\nimport { PATHS } from '../app/routes';\n\n/**\n * Resolve a parent route for the given location/params.\n * This centralizes parent-route mapping so BackButton can use\n * the same logic across the app and both language modes.\n *\n * Rules implemented:\n * - Equipment pages (/equipment/:slug) -> parent service containing product\n * - Service pages (/service/:idOrSlug) -> HOME\n * - Admin submission detail (/admin/submissions/:id) -> ADMIN_SUBMISSIONS\n * - Videos -> HOME\n * - Fallback -> HOME\n */\nexport function resolveParentPath({ pathname = '', params = {} } = {}) {\n    try {\n        // Normalize\n        const originalPath = String(pathname || '').trim();\n        let path = originalPath;\n\n        // Detect optional language prefix like /ar or /en so we can reapply it\n        // to the resolved parent path later. We keep `path` without prefix\n        // for matching, but remember the prefix for returned paths.\n        const detectLangPrefix = (p) => {\n            try {\n                const m = String(p || '').match(/^\\/(en|ar)(?=\\/|$)/i);\n                return m ? `/${m[1].toLowerCase()}` : '';\n            } catch (e) {\n                return '';\n            }\n        };\n        const langPrefix = detectLangPrefix(originalPath);\n\n        // Helper to strip query/hash and trailing slashes\n        const strip = (s) => String(s || '').split(/[?#]/)[0].replace(/\\/$/, '');\n\n        // Normalize path by removing language prefix if present\n        path = String(path || '').replace(new RegExp(`^${langPrefix}`), '');\n\n        // Equipment page - prefer explicit param\n        const slugParam = params && (params.slug || params.id || params.serviceId) || null;\n\n        // no debug logs\n        if (path.startsWith('/equipment/') || (slugParam && typeof slugParam === 'string')) {\n            const raw = slugParam && typeof slugParam === 'string' ? slugParam : (path.split('/equipment/')[1] || '');\n            const productSlug = strip(raw).split('/')[0];\n            // continue without debug logs\n            if (productSlug) {\n                // find parent service containing this product slug\n                const normInput = String(productSlug || '').toLowerCase();\n                // continue without debug logs\n                for (const service of servicesMaster) {\n                    if (service.products && Array.isArray(service.products)) {\n                        for (const p of service.products) {\n                            const candidateSlug = String(p.slug || '').toLowerCase();\n                            if (candidateSlug === normInput) return `${langPrefix}${PATHS.SERVICE(service.slug)}`;\n\n                            // tolerant matches: ignore non-word characters and compare\n                            const normalize = s => String(s || '').toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');\n                            if (normalize(candidateSlug) === normalize(normInput)) return `${langPrefix}${PATHS.SERVICE(service.slug)}`;\n\n                            // also compare against titles if slug mismatch\n                            const titleEn = (p.title && p.title.en) ? String(p.title.en).toLowerCase() : '';\n                            const titleAr = (p.title && p.title.ar) ? String(p.title.ar).toLowerCase() : '';\n                            if (titleEn && normalize(titleEn) === normalize(normInput)) return `${langPrefix}${PATHS.SERVICE(service.slug)}`;\n                            if (titleAr && normalize(titleAr) === normalize(normInput)) return `${langPrefix}${PATHS.SERVICE(service.slug)}`;\n\n                            // Partial-match fallback: check if normalized candidate contains input or input contains candidate\n                            // This helps when slugs were modified or truncated in URLs.\n                            try {\n                                const nCand = normalize(candidateSlug);\n                                const nIn = normalize(normInput);\n                                if (nCand && nIn && (nCand.includes(nIn) || nIn.includes(nCand))) return `${langPrefix}${PATHS.SERVICE(service.slug)}`;\n                            } catch (e) {\n                                // ignore and continue\n                            }\n                        }\n                    }\n                }\n                // continue\n            }\n            // no parent found - fall back to services listing (home)\n            return `${langPrefix}${PATHS.HOME}`;\n        }\n\n        // Admin submission detail\n        if (path.startsWith('/admin/submissions/')) return `${langPrefix}${PATHS.ADMIN_SUBMISSIONS}`;\n\n        // Service pages - parent is site home (services grid is on home)\n        if (path.startsWith('/service/')) {\n            // Extract slug and if it's numeric or non-matching, still fallback to HOME\n            return `${langPrefix}${PATHS.HOME}`;\n        }\n\n        // Videos page\n        if (path === PATHS.VIDEOS || path.startsWith('/videos')) return `${langPrefix}${PATHS.HOME}`;\n\n        // Default fallback\n        return `${langPrefix}${PATHS.HOME}`;\n    } catch (e) {\n        return PATHS.HOME;\n    }\n}\n\nexport default resolveParentPath;\n","const ANIM_MS = 260;\n\nexport function ensureExitStyle() {\n    if (document.getElementById('cm-back-exit-style')) return ANIM_MS;\n    const style = document.createElement('style');\n    style.id = 'cm-back-exit-style';\n    style.innerHTML = `#cm-page-wrapper{transition:transform ${ANIM_MS}ms cubic-bezier(.2,.9,.3,1),opacity ${ANIM_MS}ms cubic-bezier(.2,.9,.3,1);} #cm-page-wrapper.cm-exit{transform:translateY(-18px);opacity:0;}`;\n    document.head.appendChild(style);\n    return ANIM_MS;\n}\n\nexport function triggerExitAndNavigate(navigate, to, delayMs = ANIM_MS) {\n    try {\n        const wrapper = document.getElementById('cm-page-wrapper') || document.querySelector('main') || document.body;\n        wrapper && wrapper.classList && wrapper.classList.add('cm-exit');\n    } catch (err) {\n        void err;\n    }\n\n    setTimeout(() => {\n        navigate(to);\n    }, delayMs);\n}\n\nexport default {\n    ensureExitStyle,\n    triggerExitAndNavigate,\n    ANIM_MS,\n};\n","import React from 'react';\nimport { useNavigate, useLocation, useParams } from 'react-router-dom';\nimport { FaArrowLeft, FaArrowRight } from 'react-icons/fa';\nimport { useLanguage } from '../../context/LanguageContext';\nimport resolveParentPath from '../../lib/backNavigation';\nimport { PATHS } from '../../app/routes';\nimport { ensureExitStyle, triggerExitAndNavigate } from '../../lib/exitAnimation';\n\nexport default function BackButton({ className = 'mb-8' }) {\n    const navigate = useNavigate();\n    const location = useLocation();\n    const params = useParams();\n    const { t, language } = useLanguage();\n    const isRTL = typeof language === 'string' && language.toLowerCase().startsWith('ar');\n\n    const handleClick = (e) => {\n        e && e.preventDefault && e.preventDefault();\n\n        // determine parent route using centralized resolver\n        const parent = resolveParentPath({ pathname: location.pathname, params }) || PATHS.HOME;\n        // ensure the animation CSS exists and trigger exit animation + navigate\n        ensureExitStyle();\n        triggerExitAndNavigate(navigate, parent);\n    };\n\n    return (\n        <div className={`py-4 ${className}`}>\n            <div className=\"relative inline-block group\">\n                <span className=\"absolute -inset-1 rounded-full bg-brand/10 backdrop-blur-sm opacity-0 transform scale-95 transition-all duration-200 group-hover:opacity-100 group-hover:scale-100 pointer-events-none shadow-lg\" aria-hidden=\"true\" />\n                <button\n                    data-back-button=\"true\"\n                    onClick={handleClick}\n                    className=\"relative z-10 inline-flex items-center gap-3 text-brand hover:text-brand-secondary bg-transparent border-0 px-3 py-2 rounded-lg transition-all duration-200 hover:shadow-md\"\n                >\n                    {isRTL ? (\n                        <>\n                            <span className=\"text-sm font-medium text-brand\">{t('common_ui.back') || 'Back'}</span>\n                            <FaArrowRight className=\"text-brand text-base\" />\n                        </>\n                    ) : (\n                        <>\n                            <FaArrowLeft className=\"text-brand text-base\" />\n                            <span className=\"text-sm font-medium text-brand\">{t('common_ui.back') || 'Back'}</span>\n                        </>\n                    )}\n                </button>\n            </div>\n        </div>\n    );\n}\n"],"names":["SubpageLayout","_ref","title","titleHighlight","subtitle","children","headerChildren","useLanguage","useEffect","backs","Array","from","document","querySelectorAll","forEach","el","idx","style","display","body","dataset","hasSubpage","e","effectiveTitle","includes","sep","endsWith","concat","trim","_jsx","className","_jsxs","BackButton","id","split","map","part","i","arr","React","length","pathname","params","arguments","undefined","originalPath","String","path","langPrefix","p","m","match","toLowerCase","detectLangPrefix","strip","s","replace","RegExp","slugParam","slug","serviceId","startsWith","productSlug","normInput","service","servicesMaster","products","isArray","candidateSlug","PATHS","SERVICE","normalize","titleEn","en","titleAr","ar","nCand","nIn","HOME","ADMIN_SUBMISSIONS","VIDEOS","ANIM_MS","ensureExitStyle","getElementById","createElement","innerHTML","head","appendChild","triggerExitAndNavigate","navigate","to","delayMs","wrapper","querySelector","classList","add","err","setTimeout","useNavigate","location","useLocation","useParams","t","language","isRTL","onClick","preventDefault","parent","resolveParentPath","_Fragment","FaArrowRight","FaArrowLeft"],"ignoreList":[],"sourceRoot":""}