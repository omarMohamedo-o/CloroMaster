"use strict";(self.webpackChunkchloromaster=self.webpackChunkchloromaster||[]).push([[16],{1384(e,t,a){a.d(t,{A:()=>d});a(5043);var s=a(5685),n=a(2774),r=a(9347),i=a(7919),c=a(1529),l=a(1766),o=a(579);function d(e){let{className:t="mb-8"}=e;const a=(0,s.Zp)(),d=(0,s.zy)(),m=(0,s.g)(),{t:x,language:u}=(0,r.o)(),p="string"===typeof u&&u.toLowerCase().startsWith("ar");return(0,o.jsx)("div",{className:"py-4 ".concat(t),children:(0,o.jsxs)("div",{className:"relative inline-block group",children:[(0,o.jsx)("span",{className:"absolute -inset-1 rounded-full bg-brand/10 backdrop-blur-sm opacity-0 transform scale-95 transition-all duration-200 group-hover:opacity-100 group-hover:scale-100 pointer-events-none shadow-lg","aria-hidden":"true"}),(0,o.jsx)("button",{"data-back-button":"true",onClick:e=>{e&&e.preventDefault&&e.preventDefault();const t=(0,i.A)({pathname:d.pathname,params:m})||c.R7.HOME;(0,l.Iz)(),(0,l.Di)(a,t)},className:"relative z-10 inline-flex items-center gap-3 text-brand hover:text-brand-secondary bg-transparent border-0 px-3 py-2 rounded-lg transition-all duration-200 hover:shadow-md",children:p?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"text-sm font-medium text-brand",children:x("common_ui.back")||"Back"}),(0,o.jsx)(n.Z0P,{className:"text-brand text-base"})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.QVr,{className:"text-brand text-base"}),(0,o.jsx)("span",{className:"text-sm font-medium text-brand",children:x("common_ui.back")||"Back"})]})})]})})}},1766(e,t,a){a.d(t,{Di:()=>r,Iz:()=>n});const s=260;function n(){if(document.getElementById("cm-back-exit-style"))return s;const e=document.createElement("style");return e.id="cm-back-exit-style",e.innerHTML="#cm-page-wrapper{transition:transform ".concat(s,"ms cubic-bezier(.2,.9,.3,1),opacity ").concat(s,"ms cubic-bezier(.2,.9,.3,1);} #cm-page-wrapper.cm-exit{transform:translateY(-18px);opacity:0;}"),document.head.appendChild(e),s}function r(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s;try{const e=document.getElementById("cm-page-wrapper")||document.querySelector("main")||document.body;e&&e.classList&&e.classList.add("cm-exit")}catch(n){}setTimeout(()=>{e(t)},a)}},3016(e,t,a){a.r(t),a.d(t,{default:()=>h});var s=a(2555),n=a(5043),r=a(5685),i=a(9347),c=a(5581),l=a(1529),o=a(3328),d=a(579);function m(e){let{submissions:t=[],t:a,onView:s,onMark:n,onDelete:r}=e;return(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"w-full",children:[(0,d.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:a("admin.name")}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:a("admin.email")}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:a("admin.company")}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:a("admin.date")}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:a("admin.status")}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:a("admin.actions")})]})}),(0,d.jsx)("tbody",{className:"divide-y divide-gray-200",children:t.map(e=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("div",{className:"font-medium text-gray-900",children:e.fullName})}),(0,d.jsx)("td",{className:"px-6 py-4",children:(0,d.jsx)("div",{className:"text-sm text-gray-600",children:e.email})}),(0,d.jsx)("td",{className:"px-6 py-4",children:(0,d.jsx)("div",{className:"text-sm text-gray-600",children:e.company||"-"})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("div",{className:"text-sm text-gray-600",children:new Date(e.submittedAt).toLocaleDateString()})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)(o.A,{isRead:e.isRead,t:a,small:!0})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{onClick:()=>s(e.id),className:"text-blue-600 hover:text-blue-800",children:a("admin.view")}),(0,d.jsx)("button",{onClick:()=>n(e.id,!e.isRead),className:"text-green-600 hover:text-green-800",children:e.isRead?a("admin.markAsUnread"):a("admin.markAsRead")}),(0,d.jsx)("button",{onClick:()=>r(e.id),className:"text-red-600 hover:text-red-800",children:a("admin.delete")})]})})]},e.id))})]})})}var x=a(9262),u=a(7788),p=a(4428);const h=()=>{const{t:e}=(0,i.o)(),t=(0,r.Zp)(),[o]=(0,r.ok)(),[h,g]=(0,n.useState)([]),[b,y]=(0,n.useState)(!0),[f,j]=(0,n.useState)(""),[N,v]=(0,n.useState)({page:1,pageSize:10,total:0,totalPages:0}),[w,S]=(0,n.useState)({search:o.get("search")||"",isRead:"unread"===o.get("filter")?"false":""}),A=(0,n.useCallback)(async()=>{y(!0);try{const e=new URLSearchParams((0,s.A)((0,s.A)({page:N.page,pageSize:N.pageSize},w.search&&{search:w.search}),w.isRead&&{isRead:w.isRead})),t=await fetch("".concat(c.A.api.baseURL,"/admin/submissions?").concat(e));if(!t.ok)throw new Error("Failed to fetch submissions");const a=await t.json();g(a.data),v(e=>(0,s.A)((0,s.A)({},e),{},{total:a.total,totalPages:a.totalPages}))}catch(e){j(e.message)}finally{y(!1)}},[N.page,N.pageSize,w]);(0,n.useEffect)(()=>{localStorage.getItem("adminToken")?A():t(l.R7.ADMIN_LOGIN)},[A,t]);const k=e=>{S((0,s.A)((0,s.A)({},w),{},{isRead:e})),v((0,s.A)((0,s.A)({},N),{},{page:1}))};return(0,d.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,d.jsx)(x.A,{title:e("admin.submissions"),subtitle:"".concat(N.total," ").concat(e("admin.total")),actions:[{label:e("admin.dashboard"),onClick:()=>t(l.R7.ADMIN_DASHBOARD)},{label:e("admin.logout"),onClick:()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),t(l.R7.ADMIN_LOGIN)}}]}),(0,d.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,d.jsx)(u.A,{title:e("admin.filters"),className:"mb-6",children:(0,d.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,d.jsx)("form",{onSubmit:e=>{e.preventDefault(),v((0,s.A)((0,s.A)({},N),{},{page:1}))},className:"flex-1",children:(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("input",{type:"text",value:w.search,onChange:e=>S((0,s.A)((0,s.A)({},w),{},{search:e.target.value})),placeholder:e("admin.searchPlaceholder"),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,d.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:e("admin.search")})]})}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)("button",{onClick:()=>k(""),className:"px-4 py-2 rounded-lg ".concat(""===w.isRead?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e("admin.all")}),(0,d.jsx)("button",{onClick:()=>k("false"),className:"px-4 py-2 rounded-lg ".concat("false"===w.isRead?"bg-yellow-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e("admin.unread")}),(0,d.jsx)("button",{onClick:()=>k("true"),className:"px-4 py-2 rounded-lg ".concat("true"===w.isRead?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e("admin.read")})]})]})}),(0,d.jsx)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:b?(0,d.jsx)(p.A,{loading:!0,loadingMessage:e("admin.loading")}):f?(0,d.jsx)(p.A,{error:!0,title:e("admin.error"),message:f}):0===h.length?(0,d.jsx)("div",{className:"p-12 text-center text-gray-500",children:e("admin.noSubmissions")}):(0,d.jsx)(m,{submissions:h,t:e,navigate:t,onView:e=>t(l.R7.ADMIN_SUBMISSION_DETAIL(e)),onMark:async(e,t)=>{try{await a.e(389).then(a.bind(a,1389)).then(a=>a.markSubmissionRead(e,t)),A()}catch(s){alert(s.message)}},onDelete:async t=>{if(window.confirm(e("admin.deleteConfirm")))try{await a.e(389).then(a.bind(a,1389)).then(e=>e.deleteSubmission(t)),A()}catch(s){alert(s.message)}},pagination:N,setPagination:v})})]})]})}},3328(e,t,a){a.d(t,{A:()=>n});a(5043);var s=a(579);function n(e){let{isRead:t,small:a=!1,t:n}=e;const r=a?"px-2 py-1 text-xs":"px-3 py-1 text-sm";return t?(0,s.jsx)("span",{className:"".concat(r," font-semibold rounded-full bg-green-100 text-green-800"),children:n?n("admin.readStatus"):"Read"}):(0,s.jsx)("span",{className:"".concat(r," font-semibold rounded-full bg-yellow-100 text-yellow-800"),children:n?n("admin.newStatus"):"New"})}},4428(e,t,a){a.d(t,{A:()=>n});a(5043);var s=a(579);function n(e){let{loading:t,error:a,title:n,message:r,loadingMessage:i,children:c}=e;return t?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:i||"Loading..."})]})}):a?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-red-50 border border-red-200 text-red-700 p-6 rounded-lg",children:[n&&(0,s.jsx)("h3",{className:"font-semibold mb-2",children:n}),(0,s.jsx)("p",{children:r||a}),(0,s.jsx)("div",{className:"mt-4",children:c})]})}):null}},5581(e,t,a){a.d(t,{A:()=>s});const s={api:{baseURL:"https://localhost:5001/api",timeout:3e4},app:{name:"ChloroMaster",description:"Engineering, Contracting & Supplies - Water Treatment & Chlorination Systems",version:"1.0.0"},contact:{email:"chloromaster365@gmail.com",phone:"+20 12 22155310",phone2:"+20 12 78253701",whatsapp:"+201278253701",address:"58 Mahaliya 1 - Second District, Obour - Qalyubia",addressLink:"https://maps.google.com/?q=58+Mahaliya+1+Second+District+Obour+Qalyubia+Egypt",workingHours:{weekdays:"Sunday - Wednesday: 9:00 AM - 6:00 PM",saturday:"Saturday: 9:00 AM - 2:00 PM"}},features:{darkMode:!0,animations:!0,contactForm:!0,services:!0}}},7788(e,t,a){a.d(t,{A:()=>n});a(5043);var s=a(579);function n(e){let{icon:t,title:a,children:n,className:r=""}=e;return(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6 ".concat(r),children:[a&&(0,s.jsxs)("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,s.jsx)("span",{children:t}),a]}),n]})}},7919(e,t,a){a.d(t,{A:()=>r});var s=a(4606),n=a(1529);const r=function(){let{pathname:e="",params:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const r=String(e||"").trim();let i=r;const c=(e=>{try{const t=String(e||"").match(/^\/(en|ar)(?=\/|$)/i);return t?"/".concat(t[1].toLowerCase()):""}catch(t){return""}})(r),l=e=>String(e||"").split(/[?#]/)[0].replace(/\/$/,"");i=String(i||"").replace(new RegExp("^".concat(c)),"");const o=t&&(t.slug||t.id||t.serviceId)||null;if(i.startsWith("/equipment/")||o&&"string"===typeof o){const e=l(o&&"string"===typeof o?o:i.split("/equipment/")[1]||"").split("/")[0];if(e){const t=String(e||"").toLowerCase();for(const e of s.A)if(e.products&&Array.isArray(e.products))for(const s of e.products){const r=String(s.slug||"").toLowerCase();if(r===t)return"".concat(c).concat(n.R7.SERVICE(e.slug));const i=e=>String(e||"").toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");if(i(r)===i(t))return"".concat(c).concat(n.R7.SERVICE(e.slug));const l=s.title&&s.title.en?String(s.title.en).toLowerCase():"",o=s.title&&s.title.ar?String(s.title.ar).toLowerCase():"";if(l&&i(l)===i(t))return"".concat(c).concat(n.R7.SERVICE(e.slug));if(o&&i(o)===i(t))return"".concat(c).concat(n.R7.SERVICE(e.slug));try{const a=i(r),s=i(t);if(a&&s&&(a.includes(s)||s.includes(a)))return"".concat(c).concat(n.R7.SERVICE(e.slug))}catch(a){}}}return"".concat(c).concat(n.R7.HOME)}return i.startsWith("/admin/submissions/")?"".concat(c).concat(n.R7.ADMIN_SUBMISSIONS):(i.startsWith("/service/")||i===n.R7.VIDEOS||i.startsWith("/videos"),"".concat(c).concat(n.R7.HOME))}catch(a){return n.R7.HOME}}},9262(e,t,a){a.d(t,{A:()=>c});var s=a(2555),n=(a(5043),a(1384)),r=a(579);function i(e){let{title:t,subtitle:a,actions:s=[],showBack:i=!1,backClassName:c=""}=e;return(0,r.jsx)("header",{className:"bg-white shadow-sm",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[i&&(0,r.jsx)(n.A,{className:c}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:t}),a&&(0,r.jsx)("p",{className:"text-sm text-gray-600",children:a})]}),(0,r.jsx)("div",{className:"flex items-center gap-4",children:s.map((e,t)=>(0,r.jsx)("button",{onClick:e.onClick,className:e.className||"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:e.label},t))})]})})})}function c(e){return(0,r.jsx)(i,(0,s.A)({},e))}}}]);
//# sourceMappingURL=16.3ea728e5.chunk.js.map