"use strict";(self.webpackChunkchloromaster=self.webpackChunkchloromaster||[]).push([[16],{3016(e,a,t){t.r(a),t.d(a,{default:()=>x});var s=t(2555),r=t(5043),i=t(5685),n=t(9347),l=t(5581),d=t(1529),c=t(579);function o(e){let{submissions:a=[],t:t,onView:s,onMark:r,onDelete:i}=e;return(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"w-full",children:[(0,c.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:t("admin.name")}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:t("admin.email")}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:t("admin.company")}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:t("admin.date")}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:t("admin.status")}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:t("admin.actions")})]})}),(0,c.jsx)("tbody",{className:"divide-y divide-gray-200",children:a.map(e=>(0,c.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("div",{className:"font-medium text-gray-900",children:e.fullName})}),(0,c.jsx)("td",{className:"px-6 py-4",children:(0,c.jsx)("div",{className:"text-sm text-gray-600",children:e.email})}),(0,c.jsx)("td",{className:"px-6 py-4",children:(0,c.jsx)("div",{className:"text-sm text-gray-600",children:e.company||"-"})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("div",{className:"text-sm text-gray-600",children:new Date(e.submittedAt).toLocaleDateString()})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.isRead?(0,c.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:t("admin.readStatus")}):(0,c.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:t("admin.newStatus")})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)("button",{onClick:()=>s(e.id),className:"text-blue-600 hover:text-blue-800",children:t("admin.view")}),(0,c.jsx)("button",{onClick:()=>r(e.id,!e.isRead),className:"text-green-600 hover:text-green-800",children:e.isRead?t("admin.markAsUnread"):t("admin.markAsRead")}),(0,c.jsx)("button",{onClick:()=>i(e.id),className:"text-red-600 hover:text-red-800",children:t("admin.delete")})]})})]},e.id))})]})})}const x=()=>{const{t:e}=(0,n.o)(),a=(0,i.Zp)(),[t]=(0,i.ok)(),[x,m]=(0,r.useState)([]),[h,p]=(0,r.useState)(!0),[g,u]=(0,r.useState)(""),[y,b]=(0,r.useState)({page:1,pageSize:10,total:0,totalPages:0}),[f,N]=(0,r.useState)({search:t.get("search")||"",isRead:"unread"===t.get("filter")?"false":""}),j=(0,r.useCallback)(async()=>{p(!0);try{const e=new URLSearchParams((0,s.A)((0,s.A)({page:y.page,pageSize:y.pageSize},f.search&&{search:f.search}),f.isRead&&{isRead:f.isRead})),a=await fetch("".concat(l.A.api.baseURL,"/admin/submissions?").concat(e));if(!a.ok)throw new Error("Failed to fetch submissions");const t=await a.json();m(t.data),b(e=>(0,s.A)((0,s.A)({},e),{},{total:t.total,totalPages:t.totalPages}))}catch(e){u(e.message)}finally{p(!1)}},[y.page,y.pageSize,f]);(0,r.useEffect)(()=>{localStorage.getItem("adminToken")?j():a(d.R7.ADMIN_LOGIN)},[j,a]);const w=e=>{N((0,s.A)((0,s.A)({},f),{},{isRead:e})),b((0,s.A)((0,s.A)({},y),{},{page:1}))};return(0,c.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,c.jsx)("header",{className:"bg-white shadow-sm",children:(0,c.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,c.jsxs)("div",{className:"flex items-center justify-between",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:e("admin.submissions")}),(0,c.jsxs)("p",{className:"text-sm text-gray-600",children:[y.total," ",e("admin.total")]})]}),(0,c.jsxs)("div",{className:"flex gap-4",children:[(0,c.jsx)("button",{onClick:()=>a(d.R7.ADMIN_DASHBOARD),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:e("admin.dashboard")}),(0,c.jsx)("button",{onClick:()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),a(d.R7.ADMIN_LOGIN)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:e("admin.logout")})]})]})})}),(0,c.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,c.jsx)("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:(0,c.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,c.jsx)("form",{onSubmit:e=>{e.preventDefault(),b((0,s.A)((0,s.A)({},y),{},{page:1}))},className:"flex-1",children:(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)("input",{type:"text",value:f.search,onChange:e=>N((0,s.A)((0,s.A)({},f),{},{search:e.target.value})),placeholder:e("admin.searchPlaceholder"),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"}),(0,c.jsx)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:e("admin.search")})]})}),(0,c.jsxs)("div",{className:"flex gap-2",children:[(0,c.jsx)("button",{onClick:()=>w(""),className:"px-4 py-2 rounded-lg ".concat(""===f.isRead?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e("admin.all")}),(0,c.jsx)("button",{onClick:()=>w("false"),className:"px-4 py-2 rounded-lg ".concat("false"===f.isRead?"bg-yellow-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e("admin.unread")}),(0,c.jsx)("button",{onClick:()=>w("true"),className:"px-4 py-2 rounded-lg ".concat("true"===f.isRead?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e("admin.read")})]})]})}),(0,c.jsx)("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:h?(0,c.jsx)("div",{className:"text-center py-12",children:(0,c.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"})}):g?(0,c.jsx)("div",{className:"p-6 text-center text-red-600",children:g}):0===x.length?(0,c.jsx)("div",{className:"p-12 text-center text-gray-500",children:e("admin.noSubmissions")}):(0,c.jsx)(o,{submissions:x,t:e,navigate:a,onView:e=>a(d.R7.ADMIN_SUBMISSION_DETAIL(e)),onMark:async(e,a)=>{try{if(!(await fetch("".concat(l.A.api.baseURL,"/admin/submissions/").concat(e,"/read"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw new Error("Failed to update status");j()}catch(t){alert(t.message)}},onDelete:async a=>{if(window.confirm(e("admin.deleteConfirm")))try{if(!(await fetch("".concat(l.A.api.baseURL,"/admin/submissions/").concat(a),{method:"DELETE"})).ok)throw new Error("Failed to delete");j()}catch(t){alert(t.message)}},pagination:y,setPagination:b})})]})]})}},5581(e,a,t){t.d(a,{A:()=>s});const s={api:{baseURL:"https://localhost:5001/api",timeout:3e4},app:{name:"ChloroMaster",description:"Engineering, Contracting & Supplies - Water Treatment & Chlorination Systems",version:"1.0.0"},contact:{email:"ChloroMaster@outlook.sa",phone:"+20 12 22155310",phone2:"+20 12 78253701",whatsapp:"+201278253701",address:"58 Mahaliya 1 - Second District, Obour - Qalyubia",addressLink:"https://maps.google.com/?q=58+Mahaliya+1+Second+District+Obour+Qalyubia+Egypt",workingHours:{weekdays:"Sunday - Wednesday: 9:00 AM - 6:00 PM",saturday:"Saturday: 9:00 AM - 2:00 PM"}},features:{darkMode:!0,animations:!0,contactForm:!0,services:!0}}}}]);
//# sourceMappingURL=16.d923ae19.chunk.js.map